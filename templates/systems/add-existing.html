{% extends "layout.html" %}
{% block head -%}
		<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.9.3/css/bootstrap-select.min.css">
		<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.9.3/js/bootstrap-select.min.js"></script>
{% endblock %}
{% block body %}
<div class="alert alert-danger"><strong>Warning!</strong> This is an advanced feature recommended for administrators only. In certain cirumstances can cause future name allocations to fail and will allow you to create duplicate hostnames!</div>
<div class="page-header">
<h3>Add existing system</h3>
</div>
<p>This function exists to allow you to add existing names in to Cortex that have already been used/allocated but are unknown to Cortex. You can use this tool if an old system is missing from the list of system or if bootstrapping a Puppet master install.</p>

<form class="form-horizontal" method="POST" action="{{ url_for('systems_add_existing') }}">
	<input name="_csrf_token" type="hidden" value="{{ csrf_token() }}"/>
	<div class="form-group">
		<label for="comment" class="col-sm-2 control-label">Comment</label>
		<div class="col-sm-8">
			<input name="comment" type="text" class="form-control" value="" placeholder="A brief description of what the system is" autofocus />
		</div>
	</div>

	<div class="form-group">
		<label for="class" class="col-sm-2 control-label">Class</label>
		<div class="col-sm-2">
			<select name="class" class="selectpicker">
				<option></option>
{%- for class in classes %}
				<option value="{{ class.name }}">{{ class.name }}</option>
{%- endfor %}
			</select>
		</div>
		<label for="number" class="col-sm-1 control-label">Number</label>
		<div class="col-sm-2">
			<input name="number" type="text" class="form-control" value="" placeholder="e.g. 123" />
		</div>

	</div>

	<div class="form-group">
		<label class="col-sm-2 control-label">Puppet Environment</label>
		<div class="col-sm-8">
			<select name="env" class="selectpicker" data-width="auto">
				<option value="" selected="selected">Don't create a Puppet node</option>
{%- for env in puppet_envs %}
				<option value="{{ env.puppet }}">{{ env.name }} ({{ env.puppet }})</option>
{%- endfor %}
			</select>
		</div>
	</div>

	<div class="form-group">
		<div class="col-sm-offset-2 col-sm-10">
			<button type="submit" class="btn btn-primary">Add</button>
		</div>
	</div>
</form>
{% endblock %}
